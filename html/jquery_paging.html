<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title> jquery paging </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.1.1.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>

</style>
</head>
<body>
    <div id="pagingZone"></div>
    <div id="createdData"></div>
<script>
    /*
        인터넷에 다른분이 올린 소스를 가져와서 테스트중
    */
    var totalData = 2000;        // 총 데이터 수
    var dataPerPage = 10;        // 한 페이지에 나타낼 데이터 수
    var pageCount = 10;        // 한 화면에 나타낼 페이징 수 1 | 2 | 3 | 4 | 5
    var selectedPage = 2;        // 화면에 보여질 페이지 번호

    var NAMESPACE = (function(NAMESPACE, $, undefined){

        var pageZone = $("#pagingZone");

        NAMESPACE.initPagination = function(totalData, dataPerPage, pageCount, currentPage){
            console.log("currentPage : " + currentPage);

            var totalPage = Math.ceil(totalData/dataPerPage);    // 총 페이지 수
            var pageGroup = Math.ceil(currentPage/pageCount);    // 페이지 그룹

            console.log("pageGroup : " + pageGroup);

            var last = pageGroup * pageCount;    // 화면에 보여질 마지막 페이지 번호
            if(last > totalPage){
                last = totalPage;
            }
            var first = last - (pageCount-1);    // 화면에 보여질 첫번째 페이지 번호
            var next = last+1;
            var prev = first-1;

            console.log("last : " + last);
            console.log("first : " + first);
            console.log("next : " + next);
            console.log("prev : " + prev);

            var html = "";

            if(prev > 0){
                html += "<a href=# id='prev'>PREV</a> ";
            }

            for( var i=first ; i <= last ; i++ ){
                html += "<span style='margin:0 10px 0 10px;'><a href='#' id=" + i + ">" + i + "</a></span>";
            }

            if(last < totalPage){
                html += "<a href=# id='next'>NEXT</a>";
            }

            $(pageZone).html(html);    // 페이지 목록 생성
            $(pageZone).find("a#"+currentPage).css({color:"red"});    // 현재 페이지 표시
            // $(pageZone).find("a[id="+currentPage+"]").css({color:"red"});

            $(pageZone).find("a").on("click", function(e){
                e.preventDefault();
                var $item = $(this);
                var $id = $item.attr("id");
                var selectedPage = $item.text();
                if($id === "next"){
                    selectedPage = next;
                }else if($id === "prev"){
                    selectedPage = prev;
                }
                NAMESPACE.initPagination(totalData, dataPerPage, pageCount, selectedPage);
            });
        };

        NAMESPACE.ajaxCall = function(){

        };

        NAMESPACE.appendData = function(){

        };

        return NAMESPACE;

    })(window.NAMESPACE || {},jQuery);

    NAMESPACE.initPagination(totalData, dataPerPage, pageCount, selectedPage);
</script>
</body>
</html>
