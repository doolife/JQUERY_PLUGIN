<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title> jquery scroller </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.1.1.min.js"></script>
<script src="../js/TweenMax.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>
.wrap {width:100%; height:4000px; position:relative;}
.parallax {position:fixed;}
.parallax1 {right:0px; top:0px;}
.parallax2 {left:0px; top:400px;}
.parallax3 {left:200px; top:400px;}
</style>
</head>
<body>
<div class="wrap">
	<span class="parallax parallax1" data-y="100" data-parallax="0.25" data-opacity="1"><img src="../images/slider/00.jpg" alt="" /></span>
	<span class="parallax parallax2" data-y="-400" data-parallax="0.4" data-opacity="0"><img src="../images/slider/01.jpg" alt="" /></span>
	<span class="parallax parallax3" data-x="0" data-y="100" data-scale="0.5" data-parallax="0.50"><img src="../images/slider/02.jpg" alt="" /></span>
</div>
<script>
var NS = (function(NS, $, undefined){

	var translateX = [], translateY = [], scale = [], parallax = [], opacity = [], scrolled;
	var obj =  $(".parallax");
    NS.parallaxScroll = function(){
		sectionAnimateSet();
		$(window).on("scroll", function(){
			sectionAnimate();
		});
    };

	function sectionAnimateSet(){
		for ( var i=0, len=obj.length ; i<len ; i++ ){
			translateX[i] = $(obj[i]).attr("data-x");
			translateY[i] = $(obj[i]).attr("data-y");
			scale[i] = $(obj[i]).attr("data-scale");
			parallax[i] = $(obj[i]).attr("data-parallax");
			opacity[i] = $(obj[i]).attr("data-opacity");
			/*if (translateX[i]==undefined){
				translateX[i] = 0;
			}else if (translateY[i]==undefined){
				translateY[i] = 0;
			}else if (parallax[i]==undefined){
				parallax[i] = 0;
			}else if (opacity[i]==undefined){
				opacity[i] = 1;
			}*/
			//console.log(translateX[i]+"|"+translateY[i]+"|"+parallax[i]+"|"+opacity[i])
			console.log(scale[i])
			TweenMax.to([$(obj[i])], 0, {x:translateX[i], y:translateY[i], scale:scale[i], opacity:opacity[i]});
		}
	};

	function sectionAnimate(){
		scrolled = $(window).scrollTop();
		for ( var i=0, len=obj.length ; i<len ; i++ ){
			prepareSet(i);
			TweenMax.to([$(obj[i])], 0.4, {x:scrollX, y:scrollY, scale:scrollScale, opacity:scrollO});
		}
	};

	function prepareSet(i){
		if (translateX[i]==undefined){
			scrollX = 0;
		}else{
			if (0>=Number(translateX[i])){
				scrollX = Number(translateX[i])+scrolled*parallax[i];
			}else{
				scrollX = Number(translateX[i])-scrolled*parallax[i];
			}
		}

		if (translateY[i]==undefined){
			scrollY = 0;
		}else{
			if (0>=Number(translateY[i])){
				scrollY = Number(translateY[i])+scrolled*parallax[i];
			}else{
				scrollY = Number(translateY[i])-scrolled*parallax[i];
			}
		}

		if (scale[i]==undefined){
			scrollScale = 1;
		}else{
			if (1>=Number(scale[i])){
				scrollScale = Number(scale[i])+scrolled/1500;
				if (scrollScale>=1){
					scrollScale = 1;
				}
			}else{
				scrollScale = Number(scale[i])-scrolled/1500;
				if (scrollScale<=1){
					scrollScale = 1;
				}
			}
		}

		if (opacity[i]==undefined){
			scrollO = 1;
		}else{
			if (0>=Number(opacity[i])){
				scrollO = scrolled/900;
				if (scrollO>=1){
					scrollO = 1;
				}
			}else{
				scrollO = 1-scrolled/900;
				if (scrollO<=0){
					scrollO = 0;
				}
			}
		}
	};

	/*function sectionAnimate(){
		var translateY, opacity;
		var scrolled = $(window).scrollTop();
		for ( var i=0, len=obj.length ; i<len ; i++ ){
			translateY = 0-scrolled*$(obj[i]).attr("data-speed");
			opacity = (scrolled-$(obj[i]).attr("data-opacity"))/500;
			if (opacity>=1){
				opacity = 1;
			}
			TweenMax.to([$(obj[i])], 0.4, {y:translateY, opacity:opacity});
		}
	};*/

    return NS;

})(window.NS || {},jQuery);
NS.parallaxScroll();
</script>
</body>
</html>
