<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title> jquery scroller </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.1.1.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>
.scroller_wrap {display:inline-block; vertical-align:top; overflow:hidden;}
.scroller {width:100%; height:100%;}
</style>
</head>
<body>
<div id="scorllerSection1" class="scroller_wrap">
    <div class="scrolling1">1</div>
    <div class="scrolling1">2</div>
    <div class="scrolling1">3</div>
    <div class="scrolling1">4</div>
</div>
<div id="scorllerSection2" class="scroller_wrap">
    <div class="scrolling2">1</div>
    <div class="scrolling2">2</div>
    <div class="scrolling2">3</div>
    <div class="scrolling2">4</div>
    <div class="scrolling2">5</div>
</div>
<script>
    (function($) {

        var plugin_name = "jqueryScroller";

        $.fn[plugin_name] = function(options) {
            return this.each(function(){
                var opts = $.extend({}, $.fn[plugin_name].defaults, options || {});
                var $element = $(this);
                NS.SCROLLER.init($element, opts);
            });
        };

        window.NS = window.NS || {};
        NS.SCROLLER = {
            init : function($element, opts){
                opts.sLength = $element.children(opts.childrenClass).length;
                NS.SCROLLER.sectionSettings($element, opts);
                NS.SCROLLER.scrollControls($element, opts);
            },
            scrollControls : function($element, opts){
                var isScrolling = false;
                $element.on("mousewheel", function(e){
                    if(!isScrolling){
				        isScrolling = true;
                        NS.SCROLLER.scrollerMove($element, opts, e);
                        setTimeout(function(){
        					isScrolling = false;
        				}, 500);
                    };
                    // prevent page fom scrolling
                    return false;
                });
            },
            sectionSettings : function($element, opts){
                $element.css({width:opts.width, height:opts.height, position:"relative"}).children(opts.childrenClass).css({position:"absolute", left:0, top:0});
                for ( var i=0 ; i<opts.sLength ; i++ ){
                    if (opts.currentNum===i){
                        $element.children(opts.childrenClass).eq(i).css({top:0});
                    }else if (opts.currentNum>i){
                        $element.children(opts.childrenClass).eq(i).css({top:"-100%"});
                    }else{
                        $element.children(opts.childrenClass).eq(i).css({top:"100%"});
                    }
                }
            },
            scrollerMove : function($element, opts, e){
                if(e.originalEvent.wheelDelta < 0) {
                    // scroll down
                    if (opts.currentNum<opts.sLength-1){
                        opts.currentNum = opts.currentNum+1;
                        console.log(opts.currentNum+"|"+opts.sLength)
                        $element.children(opts.childrenClass).eq(opts.currentNum).stop().animate({top:"0%"});
                        $element.children(opts.childrenClass).eq(opts.currentNum-1).stop().animate({top:"-100%"});
                    }
                }else {
                    // scroll up
                    if (opts.currentNum>0){
                        opts.currentNum = opts.currentNum-1;
                        console.log(opts.currentNum+"|"+opts.sLength)
                        $element.children(opts.childrenClass).eq(opts.currentNum).stop().animate({top:"0%"});
                        $element.children(opts.childrenClass).eq(opts.currentNum+1).stop().animate({top:"100%"});
                    }
                }
            }
        }

        $.fn[plugin_name].defaults = {
            childrenClass:".scroller",
            currentNum:0,
            width:"100%",
            height:"100%"
        };

    })(jQuery);

    $("#scorllerSection1").jqueryScroller({
        childrenClass:".scrolling1",
        currentNum:1,
        width:500,
        height:400
    });
    $("#scorllerSection2").jqueryScroller({
        childrenClass:".scrolling2",
        currentNum:2,
        width:500,
        height:500
    });
</script>
</body>
</html>
