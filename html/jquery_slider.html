<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title> jquery slider </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.1.1.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>
.wrap {padding-bottom:100px;}
.slide_wrap {margin:20px auto 0; max-width:520px; position:relative;}
.slide_wrap>.btn_prev {position:absolute; left:0; top:0; z-index:1;}
.slide_wrap>.btn_next {position:absolute; right:0; top:0; z-index:1;}
.slide_list {width:100%; height:100%; position:relative; overflow:hidden;}
.slide_list>li {width:100%; height:100%; position:absolute;}
</style>
</head>
<body>
<div class="wrap">
    <div id="slideWrap1" class="slide_wrap">
        <button type="button" class="btn_prev">prev</button>
        <button type="button" class="btn_next">next</button>
        <ul class="slide_list">
            <li><a href="#"><img src="../images/slider/00.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/01.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/02.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/03.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/04.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/05.jpg" alt=""></a></li>
        </ul>
    </div>
    <div id="slideWrap2" class="slide_wrap">
        <button type="button" class="btn_prev">prev</button>
        <button type="button" class="btn_next">next</button>
        <ul class="slide_list">
            <li><a href="#"><img src="../images/slider/00.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/01.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/02.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/03.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/04.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/05.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/06.jpg" alt=""></a></li>
        </ul>
    </div>
    <div id="slideWrap3" class="slide_wrap">
        <button type="button" class="btn_prev">prev</button>
        <button type="button" class="btn_next">next</button>
        <ul class="slide_list">
            <li><a href="#"><img src="../images/slider/00.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/01.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/02.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/03.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/04.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/05.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/06.jpg" alt=""></a></li>
            <li><a href="#"><img src="../images/slider/07.jpg" alt=""></a></li>
        </ul>
    </div>
</div>
<script>
    (function($) {

        //    jquerySlider version 0.1
        //    $(selector).jquerySlider({
        //        currentNum:1     start view number
        //    });

        var plugin_name = "jquerySlider";
        $.fn[plugin_name] = function(options) {

            var $element = $(this);
            var defaults = {
                currentNum:0
            };
            var opts = $.extend({}, $.fn[plugin_name].defaults, options);
            var list = $element.children(".slide_list").find("li");
            var listLen = list.length;
            var listWrap = $element.children(".slide_list");
            var divWidth = 760;        // 원본 이미지 가로 사이즈
            var divHeight = 924;        // 원본 이미지 세로 사이즈

            var consTructors = {
                init : function() {
                    $btnNext = $element.children(".btn_next");
                    $btnPrev = $element.children(".btn_prev");
                    consTructors.btnControler();
                    consTructors.resizeControls();
                },
                btnControler : function() {
                    $btnNext.on("click", function(e){
                        e.preventDefault();
                        consTructors.sliderAction("next");
                    });
                    $btnPrev.on("click", function(e){
                        e.preventDefault();
                        consTructors.sliderAction("prev");
                    });
                },
                sliderAction : function(strChk){
                    if (strChk=="next"){
                        if (opts.currentNum != listLen-1){
                            opts.currentNum = opts.currentNum+1;
                            consTructors.slideContents();
                        }
                    }else if (strChk=="prev"){
                        if(opts.currentNum != 0){
                            opts.currentNum = opts.currentNum-1;
                            consTructors.slideContents();
                        }
                    }
                },
                slideContents : function (){
                    for ( var i=0 ; i<listLen ; i++){
                        $(list[i]).stop().animate({left:listWrap.width()*(i-opts.currentNum)});
                    }
                },
                resizeControls : function(){
                    var resizeTimer;
                	$(window).resize(function (){
                        if (resizeTimer) {
                            clearTimeout(resizeTimer);
                        }
                        resizeTimer = setTimeout(function() {
                            resizeTimer = null;
                            var resizeWidth = $element.width();
                            var ratioHeight = Math.floor(resizeWidth*divHeight/divWidth);
                            $element.children(".slide_list").css({width:resizeWidth, height:ratioHeight});
                            for ( var i=0 ; i<listLen ; i++ ){
                                $(list[i]).css({width:resizeWidth, height:ratioHeight, left:resizeWidth*(i-opts.currentNum)});
                            }
                        }, 0);
                	}).resize();
                }
            }
            consTructors.init();
        }

    })(jQuery);

    $("#slideWrap1").jquerySlider({
        currentNum:0
    });
    $("#slideWrap2").jquerySlider({
        currentNum:1
    });
    $("#slideWrap3").jquerySlider({
        currentNum:2
    });

</script>
</body>
</html>
