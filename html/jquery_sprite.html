<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title> jquery slider </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.1.1.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>
.wrap {padding-bottom:100px;}
.slide_wrap {margin:20px auto 0; position:relative;}
.slide_wrap>.btn_prev {position:absolute; left:0; top:0; z-index:1;}
.slide_wrap>.btn_next {position:absolute; right:0; top:0; z-index:1;}
.slide_list {text-align:center; position:relative; overflow:hidden; border:1px solid #000;}
.slide_list>li {position:absolute;}
</style>
</head>
<body>
<div class="wrap">
    <div id="slideWrap1" class="slide_wrap">
        <button type="button" class="btn_prev">prev</button>
        <button type="button" class="btn_next">next</button>
        <ul class="slide_list">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
        </ul>
    </div>
    <div id="slideWrap2" class="slide_wrap">
        <button type="button" class="btn_prev">prev</button>
        <button type="button" class="btn_next">next</button>
        <ul class="slide_list">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
        </ul>
    </div>
    <div id="slideWrap3" class="slide_wrap">
        <button type="button" class="btn_prev">prev</button>
        <button type="button" class="btn_next">next</button>
        <ul class="slide_list">
            <li>1</li>
            <li>2</li>
            <li>3</li>
            <li>4</li>
            <li>5</li>
            <li>6</li>
            <li>7</li>
            <li>8</li>
            <li>9</li>
            <li>10</li>
        </ul>
    </div>
</div>
<script>
    (function($) {

        //    jquerySlider version 0.1
        var plugin_name = "jquerySlider";
        $.fn[plugin_name] = function(options) {

            var defaults = {    // 사용자 옵션이 없을때 기본값
                currentNum:0,    // 처음 보여줄 이미지 번호
                maxWidth:420,    // 최대 사이즈
                divWidth:720,    // 이미지 원본 가로 사이즈
                divHeight:405    // 이미지 원본 세로 사이즈
            };
            //var opts = $.extend({}, $.fn[plugin_name].defaults, options);
            var opts = $.extend({}, defaults, options || {});
            var $element = $(this);
            var list = $element.children(".slide_list").find("li");
            var listLen = list.length;
            var listWrap = $element.children(".slide_list");

            var consTructors = {
                init : function() {
                    $btnNext = $element.children(".btn_next");
                    $btnPrev = $element.children(".btn_prev");
                    consTructors.btnControler();
                    consTructors.resizeControls();
                },
                btnControler : function() {
                    $btnNext.on("click", function(e){
                        e.preventDefault();
                        consTructors.sliderAction("next");
                    });
                    $btnPrev.on("click", function(e){
                        e.preventDefault();
                        consTructors.sliderAction("prev");
                    });
                },
                sliderAction : function(strChk){
                    if (strChk=="next"){
                        if (opts.currentNum != listLen-1){
                            opts.currentNum = opts.currentNum+1;
                            consTructors.slideContents();
                        }
                    }else if (strChk=="prev"){
                        if(opts.currentNum != 0){
                            opts.currentNum = opts.currentNum-1;
                            consTructors.slideContents();
                        }
                    }
                },
                slideContents : function (){
                    for ( var i=0 ; i<listLen ; i++){
                        $(list[i]).stop().animate({left:listWrap.width()*(i-opts.currentNum)});
                    }
                },
                resizeControls : function(){
                    var resizeTimer;
                    console.log(opts.maxWidth)
                	$(window).resize(function (){
                        if (resizeTimer) {
                            clearTimeout(resizeTimer);
                        }
                        resizeTimer = setTimeout(function() {
                            resizeTimer = null;
                            $element.css({maxWidth:opts.maxWidth});
                            var resizeWidth = $element.width();
                            var ratioHeight = Math.floor(resizeWidth*opts.divHeight/opts.divWidth);
                            $element.children(".slide_list").css({width:resizeWidth, height:ratioHeight});
                            for ( var i=0 ; i<listLen ; i++ ){
                                $(list[i]).css({width:resizeWidth, height:ratioHeight, left:resizeWidth*(i-opts.currentNum)});
                                // $(list[i]).find("img").css({height:ratioHeight}).css({marginLeft:(resizeWidth-$(list[i]).find("img").width())/2});
                                // console.log((resizeWidth-$(list[i]).find("img").width())/2)
                            }
                        }, 0);
                	}).resize();
                }
            }
            consTructors.init();
        }

    })(jQuery);

    $("#slideWrap1").jquerySlider({
        currentNum:0,
        maxWidth:200,
        divWidth:16,
        divHeight:9
    });

</script>
</body>
</html>
