<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title>remote menu</title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.2.1.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>
/* mobile */
.remote_menu { width: 256px; height: 100%; position: fixed; right: -256px; opacity: 0; background: url("../images/remote_bg_m.gif") no-repeat center top; background-size: contain; z-index: 9100025; }
.remote_menu .remote_overflow { height: 100%; overflow-y: auto; }
.remote_menu:before { content: ""; display: block; width: 100%; position: absolute; top: 122px; left: 0; bottom: 0; background-color: #141414; }
.remote_menu a { text-decoration: none; }
.remote_menu .remote_arrow { width: 41px; height: 72px; position: absolute; left: -42px; top: 120px; background: url("../images/remote_arrow.png") no-repeat 0 0; z-index: 1; }
.remote_menu .remote_arrow.on { left: -11px; background-position: -41px 0; }
.remote_menu .menu_list { margin: 0 0 28px 40px; position: relative; }
.remote_menu .menu_list:before { content: ""; display: block; overflow: hidden; }
.remote_menu .menu_list li { width: 100%; text-align: left; position: relative; }
.remote_menu .menu_list li a { width: 100%; height: 27px; line-height: 27px; display: block; color: #6f6b5f; font-size: 14px; letter-spacing: -1px; transition: 0.4s ease; }
.remote_menu .menu_list li.active > a { color: #ddb382; }
.remote_menu .menu_list > li { margin-top: 15px; }
.remote_menu .menu_list > li:first-child { margin-top: 20px; }
.remote_menu .menu_list > li > a { height: 37px; line-height: 37px; font-size: 16px; font-weight: bold; }
.remote_menu .remote_etc { padding: 0 0 28px 40px; position: relative; overflow: hidden; }
.remote_menu .remote_etc:before { content: ""; display: block; margin-left: -88px; width: 176px; height: 1px; position: absolute; left: 50%; top: 0; background-color: rgba(255, 255, 255, 0.1); }
.remote_menu .remote_etc span { display: inline-block; }
.remote_menu .remote_etc .remote_link { margin-top: 23px; width: 100%; height: 15px; display: block; text-align: left; color: #6f6b5f; font-size: 12px; position: relative; }
.remote_menu .remote_etc .remote_link:before { content: ""; display: inline-block; margin: -1px 8px 0 0; width: 15px; height: 16px; vertical-align: middle; background: url("../images/remote_etc_bg.png") no-repeat 0 0; }
.remote_menu .remote_etc .remote_link.remote_home:before { background-position: 0 0; }
.remote_menu .remote_etc .remote_link.remote_nshop:before { background-position: -16px 0; }
.remote_menu .remote_etc .remote_link:first-child { margin-top: 27px; }

/* web */
@media screen and (min-width: 769px) {
    .remote_menu { width: 178px; height: auto; position: absolute; right: -180px; background: url("../images/remote_bg.png") no-repeat center top; border: 1px solid rgba(0, 0, 0, 0.9); border-radius: 5px; z-index: 9999; }
    .remote_menu .remote_overflow { height: auto; overflow-y: hidden; }
    .remote_menu:before { top: 50px; background-color: rgba(20, 20, 20, 0.9); }
    .remote_menu .remote_arrow { top: 10px; }
    .remote_menu .menu_list { margin-left: 0; }
    .remote_menu .menu_list li { text-align: center; }
    .remote_menu .menu_list li:hover > a { color: #ddb382; }
    .remote_menu .remote_etc { padding-left: 0; text-align: center; }
    .remote_menu .remote_etc:before { margin-left: 0; width: 100%; height: 2px; left: 0; background: url("../images/remote_line.png") no-repeat center top; }
    .remote_menu .remote_etc .remote_link { text-align: left; }
}

.remote_wrap {min-width:1100px; position:relative; overflow:hidden;}
header {height:800px;}
.section1_1 {height:700px; background:cornflowerblue;}
.section1_2 {height:700px; background:greenyellow;}
.section1_3 {height:700px; background:orangered;}
.section2_1 {height:700px; background:forestgreen;}
.section2_2 {height:700px; background:hotpink;}
.section2_3 {height:700px; background:violet;}
.section3 {height:700px;}
</style>
</head>
<body>
    <div class="remote_wrap">
        <header></header>
        <aside id="remoteMenu" class="remote_menu">
            <div class="remote_overflow">
                <button type="button" class="remote_arrow" data-btn="arrow"></button>
                <ul class="menu_list" data-remote="wrap">
                    <li data-list="list">
                        <a href="#section1">신규/복귀  혜택</a>
                        <ul>
                            <li data-list="list"><a href="#section1_1">참여 방법</a></li>
                            <li data-list="list"><a href="#section1_2">도전 인챈트</a></li>
                            <li data-list="list"><a href="#section1_3">Bonus</a></li>
                        </ul>
                    </li>
                    <li data-list="list">
                        <a href="#section2">신규/복귀 이용권</a>
                        <ul>
                            <li data-list="list"><a href="#section2_1">이용권 구성</a></li>
                            <li data-list="list"><a href="#section2_2">이용권 상세안내</a></li>
                            <li data-list="list"><a href="#section2_3">탐나는 성장의 열매 효과</a></li>
                        </ul>
                    </li>
                    <li data-list="list">
                        <a href="#section3">업데이트 갤러리</a>
                    </li>
                </ul>
                <div class="remote_etc">
                        <span>
                            <a href="https://lineage.plaync.com" target="_blank" class="remote_link remote_home">공식 홈페이지</a>
                            <a href="http://nshop.plaync.com/nshop/" class="remote_link remote_nshop">리니지 N샵</a>
                        </span>
                </div>
            </div>
        </aside>
        <section data-id="section1" data-contents="con">
            <section data-id="section1_1" data-contents="scon" class="section1_1"></section>
            <section data-id="section1_2" data-contents="scon" class="section1_2"></section>
            <section data-id="section1_3" data-contents="scon" class="section1_3"></section>
        </section>
        <section data-id="section2" data-contents="con">
            <section data-id="section2_1" data-contents="scon" class="section2_1"></section>
            <section data-id="section2_2" data-contents="scon" class="section2_2"></section>
            <section data-id="section2_3" data-contents="scon" class="section2_3"></section>
        </section>
        <section data-id="section3" data-contents="con" class="section3">
            <section data-id="section3_1" data-contents="scon" class="section3_1"></section>
        </section>
    </div>
    <script>
        var remote = function(opts){

            var $wrap = $(opts.element),
                $gnb = $wrap.find($("[data-remote='wrap']")).children("[data-list='list']"),
                $snb = $gnb.find("[data-list='list']"),
                $con = $("[data-contents='con']"), $scon = $("[data-contents='scon']"), $btnArrow = $("[data-btn='arrow']");

            var timeout, resizeTimer, isMobile, resizeWidth, _settings = true, gnbNum, snbNum, removeChk = false;

            arrowSlide();
            controls();

            function controls(){
                if(opts.quick) {
                    $gnb.children("a").on("click", function(e){
                        var hash = $(this).attr("href"), reStr = hash.replace(/#/g, "");
                        listSlide(reStr);
                    });

                    $snb.children("a").on("click", function(e){
                        var hash = $(this).attr("href"), reStr = hash.replace(/#/g, "");
                        listSlide(reStr);
                    });
                }

                $(window).on("resize", function(){
                    isMobile = (window.matchMedia("(min-width:769px)").matches) ? false : true;
                    clearTimeout(resizeTimer);
                    resizeTimer = setTimeout(function() {
                        resizeWidth = $wrap.outerWidth();
                        if(opts.show){
                            $wrap.css({right:-resizeWidth});
                        }else{
                            mobileMask();
                        }
                        scrollAction();
                    }, 150);
                }).resize();

                $(window).on("scroll", function(){
                    clearTimeout(timeout);
                    timeout = setTimeout(function(){
                        scrollAction();
                    }, opts.delay);
                });

                $btnArrow.on("click", function(e){
                    arrowSlide();
                });

                $(document).on("click", "[data-remote='mask']", function(e){
                    arrowSlide();
                });
            };

            function scrollAction(){
                var scltop = $(window).scrollTop();
                if(!isMobile){
                    if(scltop >= opts.top - opts.fix) {
                        if(!_settings) {
                            $wrap.stop().animate({top: $(window).scrollTop() + opts.fix}, opts.qspeed);
                        } else {
                            $wrap.css({top: $(window).scrollTop() + opts.fix});
                            _settings = false;
                        }
                    } else {
                        $wrap.css({top: opts.top});
                    }
                }else{
                    $wrap.css({top: 0});
                }

                if(opts.quick) {
                    quickAnchor(scltop)
                }
            }

            function quickAnchor(scltop){
                var firstTop = $con.eq(0).offset().top,
                    lastBottom = $con.eq($con.length - 1).offset().top + $con.eq($con.length - 1).height(),
                    endScroll = $(window).scrollTop() == $(document).height() - $(window).height();
                for(var i = 0, len = $con.length; i < len; i++) {
                    var conTop = $con.eq(i).offset().top;
                    if(conTop <= scltop) {
                        gnbNum = i;
                        for(var j = 0, slen = $con.eq(i).children($scon).length; j < slen; j++) {
                            var sconTop = $con.eq(i).children($scon).eq(j).offset().top;
                            if(sconTop <= scltop) {
                                snbNum = j;
                            }
                        }
                    }
                    removeChk = (scltop < firstTop || scltop > lastBottom) ? true : false;
                }
                if(!removeChk) {
                    $gnb.removeClass("active");
                    $gnb.find($snb).removeClass("active");
                    $wrap.css({opacity:1});
                    if(endScroll){
                        $gnb.eq($gnb.length-1).addClass("active");
                        $gnb.eq($gnb.length-1).find($snb).eq($gnb.eq($gnb.length-1).find($snb).length-1).addClass("active");
                    }else{
                        $gnb.eq(gnbNum).addClass("active");
                        $gnb.eq(gnbNum).find($snb).eq(snbNum).addClass("active");
                    }
                } else {
                    $gnb.removeClass("active");
                    $gnb.find($snb).removeClass("active");
                    $wrap.css({opacity:0});
                    opts.show = false;
                    arrowSlide();
                }
            }

            function arrowSlide(){
                if(opts.show) {
                    $wrap.stop().animate({right:0}, 250).find($btnArrow).addClass("on");
                    opts.show = false;
                }else{
                    $wrap.stop().animate({right:-resizeWidth}, 250).find($btnArrow).removeClass("on");
                    opts.show = true;
                }
                mobileMask();
            }

            function mobileMask(){
                $("#mask").remove();
                if(isMobile){
                    if(!opts.show){
                        $wrap.before($("<div id='mask' style='width:100%; height:100%; position:fixed; left:0; top:0; opacity:0.8; background:#000; z-index:9100025;' data-remote='mask'></div>"));
                        $("body, html").css({height:"auto", overflow:"hidden"});
                    }else{
                        $("body, html").css({height:"", overflow:""});
                    }
                }else{
                    $("body, html").css({height:"", overflow:""});
                }
            }

            function listSlide(id){
                var conOffset = $("[data-id='" + id + "']").offset().top;
                $("html, body").stop().animate({scrollTop: conOffset}, opts.cspeed);
                if(isMobile){
                    arrowSlide();
                }
            }
        };

        $(document).ready(function(){
            new remote({
                element:"#remoteMenu",  // element
                top:920,    // 기본 상단에서 떨어진 값
                fix:100,    // 스크롤시 상단에서 떨어진 값
                qspeed:300,    // 스크롤시 퀵메뉴 따라다니는 스피드
                cspeed:600,    // 퀵메뉴 클릭시 이동하는 스피드
                delay:0,    // 스크롤 정지 체크 시간
                show:false,    // true : 보이기 / false : 숨기기
                quick:true      // true : 퀵메뉴 / flase : 네비게이션
            });
        });
    </script>
</body>
</html>
