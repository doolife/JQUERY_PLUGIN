<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width" />
<title> select box </title>
<meta name="Keywords" content="">
<meta name="Description" content="">
<link rel="stylesheet" href="../css/base.css" />
<script src="../js/jquery-3.1.1.min.js"></script>
<!--[if lt ie 9]>
<script src="../js/html5.js"></script>
<script src="../js/respond.js"></script>
<![endif]-->
<style>
.select_box {margin:100px 0 0 25px; width:300px; display:inline-block; vertical-align:top; border:1px solid #000;}
.select_box>.select_tit {padding:0 20px 0 20px; height:64px; line-height:64px; text-align:left; font-size:15px; color:#fff; position:relative; background-color:#595234; cursor:pointer;}
.select_box>.select_tit:before {content:""; width:64px; height:64px; display:block; position:absolute; right:0; top:0; background:url("../images/select_arrow.gif") no-repeat left top;}
.select_box>.select_tit[disabled] {cursor:default;}
.select_box>.select_tit.active:before {background-position:right -64px;}
.select_box>.select_list {display:none;}
.select_box>.select_list.active {display:block;}
.select_box>.select_list>li {padding:0 20px 0 20px; height:64px; line-height:64px; color:#bfb690; background-color:#1f1903; border-top:1px solid #000; cursor:pointer;}
.select_box>.select_list>li:hover {background:#3e6b88;}
</style>
</head>
<body>
<div id="selectBox1" class="select_box">
    <div class="select_tit">캐릭터를 선택해주세요.</div>
    <ul class="select_list select_list1">
        <li><div><span>서버</span><span>캐릭터</span>1_1</div></li>
        <li><div><span>서버</span><span>캐릭터</span>1_2</div></li>
        <li><div><span>서버</span><span>캐릭터</span>1_3</div></li>
        <li><div><span>서버</span><span>캐릭터</span>1_4</div></li>
        <li><div><span>서버</span><span>캐릭터</span>1_5</div></li>
    </ul>
</div>

<div id="selectBox2" class="select_box">
    <div class="select_tit">캐릭터를 선택해주세요.</div>
    <ul class="select_list select_list2">
        <li><div><span>서버</span><span>캐릭터</span>2_1</div></li>
        <li><div><span>서버</span><span>캐릭터</span>2_2</div></li>
        <li><div><span>서버</span><span>캐릭터</span>2_3</div></li>
        <li><div><span>서버</span><span>캐릭터</span>2_4</div></li>
        <li><div><span>서버</span><span>캐릭터</span>2_5</div></li>
        <li><div><span>서버</span><span>캐릭터</span>2_6</div></li>
    </ul>
</div>

<div id="selectBox3" class="select_box">
    <div class="select_tit">캐릭터를 선택해주세요.</div>
    <ul class="select_list select_list3">
        <li><div><span>서버</span><span>캐릭터</span>3_1</div></li>
        <li><div><span>서버</span><span>캐릭터</span>3_2</div></li>
        <li><div><span>서버</span><span>캐릭터</span>3_3</div></li>
        <li><div><span>서버</span><span>캐릭터</span>3_4</div></li>
    </ul>
</div>
<script>
    (function($) {

        var plugin_name = "selectBox";

        $.fn[plugin_name] = function(options) {

            var defaults = {    // 사용자 옵션이 없을때 기본값
                listTitle:".select_tit",    // 선택된 값
                listParent:".select_list",    // 셀렉트박스 리스트 부모
                listChild:"li",    // 셀렉트박스 리스트
                disabled:false,    // disabled 여부 사용자옵션으로 true 값을 주면 클릭안됨
                callBack:null    // callBack 리스트 클릭할때 index 값을 콜백
            };

            var opts = $.extend({}, defaults, options || {});
            var $element = $(this);

            var consTructors = {
                init : function() {
                    $element.children(""+opts.listTitle+"").attr({"disabled":opts.disabled});    // disabled 여부
                    $element.children(""+opts.listTitle+"").on("click", function(e){    // 셀렉트박스 클릭
                        e.preventDefault();
                        consTructors.selectOpenClose();    // selectOpenClose 함수 호출
                    });

                    $element.children(""+opts.listParent+"").children(""+opts.listChild+"").on("click", function(e){    // 셀렉트박스 리스트 클릭
                        e.preventDefault();
                        var target = $(this);
                        consTructors.listSelect(target);    // listSelect 함수 호출
                        if (typeof opts.callBack == "function"){    // index 값 콜백
                            opts.callBack(target.index());
                        }
                    });
                },
                selectOpenClose : function() {
                    if($element.children(""+opts.listTitle+"").attr("disabled")!="disabled"){    // disabled 값이 false 일때만 실행
                        if(!$element.children(""+opts.listParent+"").hasClass("active")){    // class="active" 없을때만 active 클래스 추가 있으면 active 클래스 삭제
                            $element.children(""+opts.listTitle+"").addClass("active");
                            $element.children(""+opts.listParent+"").addClass("active");
                        }else{
                            $element.children(""+opts.listTitle+"").removeClass("active");
                            $element.children(""+opts.listParent+"").removeClass("active");
                        }
                    }
                },
                listSelect : function(target) {
                    var tagClone = $(target).contents().clone();    // 셀렉트박스 리스트내의 내용들 복사
                    $element.children(""+opts.listTitle+"").empty().append(tagClone);    // 셀렉트박스 리스트내의 복사한 내용을 선택 붙여넣기(기존 .select_tit 내용 삭제)
                    $element.children(""+opts.listTitle+"").removeClass("active");    // active 클래스 삭제
                    $element.children(""+opts.listParent+"").removeClass("active");
                }
            }
            consTructors.init();
        }

    })(jQuery);

    $("#selectBox1").selectBox({
        listTitle:".select_tit",
        listParent:".select_list1",
        listChild:"li",
        callBack:function(num){
            console.log("1_"+num)
        }
    });

    $("#selectBox2").selectBox({
        listTitle:".select_tit",
        listParent:".select_list2",
        listChild:"li",
        disabled:true,
        callBack:function(num){
            console.log("2_"+num)
        }
    });

    $("#selectBox3").selectBox({
        listTitle:".select_tit",
        listParent:".select_list3",
        listChild:"li",
        callBack:function(num){
            console.log("3_"+num)
        }
    });



    // (function($) {
    //
    //     var moduleName = "selectBox";
    //
    //     $.fn[moduleName] = function(options) {
    //         var opts = $.extend({}, $.fn[moduleName].defaults, options || {});
    //         var $element = $(this);
    //         appModule.init($element, opts);
    //     };
    //
    //     window.appModule = window.appModule || {};
    //     appModule = {
    //         init : function($element, opts) {
    //             // appModule.idx = 0;
    //             $element.children(""+opts.listTitle+"").attr({"disabled":opts.disabled});
    //             $element.children(""+opts.listTitle+"").on("click", function(e){
    //                 e.preventDefault();
    //                 appModule.selectOpenClose($element, opts);
    //             });
    //
    //             $element.children(""+opts.listParent+"").children(""+opts.listChild+"").on("click", function(e){
    //                 e.preventDefault();
    //                 var target = $(this);
    //                 appModule.listSelect($element, opts, target);
    //                 if (typeof opts.callBack == "function"){
    //                     opts.callBack(target.index());
    //                 }
    //             });
    //         },
    //         selectOpenClose : function($element, opts) {
    //             if($element.children(""+opts.listTitle+"").attr("disabled")!="disabled"){
    //                 if(!$element.children(""+opts.listParent+"").hasClass("active")){
    //                     $element.children(""+opts.listTitle+"").addClass("active");
    //                     $element.children(""+opts.listParent+"").addClass("active");
    //                 }else{
    //                     $element.children(""+opts.listTitle+"").removeClass("active");
    //                     $element.children(""+opts.listParent+"").removeClass("active");
    //                 }
    //             }
    //         },
    //         listSelect : function($element, opts, target) {
    //             var tagClone = $(target).contents().clone();
    //             $element.children(""+opts.listTitle+"").empty().append(tagClone);
    //             $element.children(""+opts.listTitle+"").removeClass("active");
    //             $element.children(""+opts.listParent+"").removeClass("active");
    //             // appModule.idx = appModule.idx+1;
    //             // console.log(appModule.idx)
    //             // // $(".select_box").eq(appModule.idx).children(".select_tit").removeAttr("disabled");
    //             // $(".select_box").children(".select_tit").attr({"disabled":true});
    //             // $(".select_box").eq(appModule.idx).children(".select_tit").attr({"disabled":false});
    //         }
    //     };
    //
    //     $.fn[moduleName].defaults = {
    //         listTitle:".select_tit",
    //         listParent:".select_list",
    //         listChild:"li",
    //         disabled:false,
    //         callBack:null
    //     };
    //
    // })(jQuery);
    //
    // $("#selectBox1").selectBox({
    //     listTitle:".select_tit",
    //     listParent:".select_list1",
    //     listChild:"li",
    //     callBack:function(num){
    //         console.log("1_"+num)
    //     }
    // });
    //
    // $("#selectBox2").selectBox({
    //     listTitle:".select_tit",
    //     listParent:".select_list2",
    //     listChild:"li",
    //     callBack:function(num){
    //         console.log("2_"+num)
    //     }
    // });
    //
    // $("#selectBox3").selectBox({
    //     listTitle:".select_tit",
    //     listParent:".select_list3",
    //     listChild:"li",
    //     callBack:function(num){
    //         console.log("3_"+num)
    //     }
    // });

</script>
</body>
</html>
